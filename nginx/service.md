# Nginx 服务

## 启动，停止和重新加载Nginx配置

要启动nginx，请运行可执行文件。 当nginx启动后，可以通过使用`-s`参数调用可执行文件来控制它。 使用以下语法：

```
nginx -s signal
```

信号(`signal`)的值可能是以下之一：

- `stop` - 快速关闭服务
- `quit` - 正常关闭服务
- `reload` - 重新加载配置文件
- `reopen` - 重新打开日志文件

例如，要通过等待工作进程完成服务当前请求来停止`nginx`进程，可以执行以下命令：

```bash
nginx -s quit
```

> 注：该命令应该在启动nginx的同一用户下执行。

在将重新配置命令的命令发送到nginx或重新启动之前，配置文件中的更改将不会被应用。 要重新加载配置文件，请执行：

```bash
nginx -s reload
```

当主进程收到要重新加载配置的信号，它将检查新配置文件的语法有效性，并尝试应用其中提供的配置。 如果这是成功的，主进程将启动新的工作进程，并向旧的工作进程发送消息，请求它们关闭。 否则，主进程回滚更改，并继续使用旧配置。 老工作进程，接收关闭命令，停止接受新连接，并继续维护当前请求，直到所有这些请求得到维护。 之后，旧的工作进程退出。

还可以借助Unix工具(如kill utility)将信号发送到nginx进程。 在这种情况下，信号直接发送到具有给定进程ID的进程。 默认情况下，nginx主进程的进程ID写入目录`/usr/local/nginx/logs`或`/var/run`中的nginx.pid。 例如，如果主进程ID为`1628`，则发送QUIT信号导致nginx的正常关闭，请执行：

```bash
kill -s QUIT `pidof nginx`
```

要获取所有运行的nginx进程的列表，可以使用`ps`命令，例如，以下列方式：

```bash
ps -ax | grep nginx
```
